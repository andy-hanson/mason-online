<!DOCTYPE html><html><head><title>tour/class - mason programming language</title><meta charset="utf-8"><meta name="description" content="Mason is a new programming language compiling to JavaScript. It runs on the web and in node.js."><link rel="icon" href="/icon.svg"><!-- ID needed because mason-editor.js is not run inside of this.--><link id="link-mason-editor" rel="import" href="/mason-editor"><!-- I'd like to include this in mason-editor.pug, but RequireJS won't let me.--><link rel="stylesheet" href="/style/layout.css"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga')
ga('create', 'UA-66651880-1', 'auto')
ga('send', 'pageview')
</script><script src="/lib/requirejs/require.js"></script><script>requirejs.config({
	baseUrl: '/lib',
	paths: {
		marked: 'marked/marked.min',
		msl: 'msl/lib',
		'mason-compile': 'mason-compile/lib'
	}
})
// kludge: need to require bootstrap because mason modules lazily load using _ms
require(['msl/private/bootstrap'], () =>
	require(['../script/mason-editor/mason-editor']), err => { throw err })
</script></head><body><header><h1><a href="/">mason</a></h1><nav><a href="basic">basic</a><a href="=">=</a><a href="if">if</a><a href="try">try</a><a href="poly">poly</a><a href="class">class</a><a href="trait">trait</a><a href="type">type</a><a href="misc">misc</a><a href="for">for</a><a href="pattern">pattern</a><a href="yield">yield</a><a href="async">async</a><a href="doc">doc</a></nav></header><main><section><p><code>class</code> creates a JavaScript class.</p><p>The class body consists of a constructor followed by method definitions.</p><p>You can use computed method names with <code>()</code>. This allows you to implement <code>poly</code>s.</p></section><mason-editor><pre>dimension = poly \
	abstract

|| If superclass is missing, it will be Object, so this is just for show.
Point = class
	construct x y
		.x := x
		.y := y

	|| This implements the builtin `to-string` method.
	|| Any expression can go within the parentheses;
	|| if it's a method, its `symbol` property will be fetched.
	(dimension) \
		2

	transpose! !\
		{x y} = this
		.y := x
		.x := y

p = new Point 1 2
. dimension p
p.transpose!()
. p
</pre></mason-editor><a href="/tour/class#static"><h2 id="static">static</h2></a><section><p>A <code>do</code> block sets <code>_</code> to the class and lets you do anything with it.
<span class="aside">These usually aren't needed.</span></p><p><code>static</code> defines static methods.</p><p>Constructor arguments prefixed with <code>.</code> become properties.</p></section><mason-editor><pre>Point = class
	do
		_.origin := new _ 0 0

	static
		|| `empty` is a builtin poly
		(empty) \
			.origin

		from-array \arr
			new Point arr[0] arr[1]

	construct .x .y
		pass

. empty Point
. Point.from-array [1 2]
</pre></mason-editor><p>The parts of a class <strong>must</strong> come in this order:
<code>do</code>, <code>static</code>, <code>construct</code>, then methods.
</p><a href="/tour/class#get / set"><h2 id="get / set">get / set</h2></a><section><p>Getters and setters are also supported.</p></section><mason-editor><pre>Point = class
	construct x y
		.x := x
		.y := y

	get len
		Math.sqrt + (** .x 2) ** .y 2

	|| Setter has `_` as its implicit parameter.
	set len
		scale = / _ .len
		.x := * .x scale
		.y := * .y scale

p = new Point 3 4
. p.len
p.len := 25
. p
</pre></mason-editor><a href="/tour/class#my"><h2 id="my">my</h2></a><section><p>When you don't intend a method to be used by others, just put <code>my</code> in front.</p><p>This works on all kinds, including get/set.</p><p><code>my</code> doesn't actually do anything, but <a href="//github.com/mason-lang/mason-doc">mason-doc</a> is planned to use that information.</p></section><mason-editor><pre>Bouncer = class
	allow-entry? \guess
		=? guess .password

	my get password
		'swordfish

_ = new Bouncer
. _.allow-entry? 'abc123
|| not actually secret
. _.allow-entry? _.password
</pre></mason-editor><a href="/tour/class#super"><h2 id="super">super</h2></a><section><p>Class inheritance works the same as in JavaScript.</p><p>Declare the superclass by writing it after the <code>class</code>.</p><p>The constructor of an inherited class must call <code>super</code>
before attempting to access <code>this</code>.</p><p>You can use <code>super</code> in methods to call the same method on a super class,
or <code>super.foo</code> to call a different method.</p><p>Like in JavaScript, static methods are inherited.</p></section><mason-editor><pre>A = class
	static
		get super-static
			4

	construct foo
		.foo := 0

	super-method \
		1

	overridden-method \x
		x

B = class extends A
	construct
		|| Illegal to write to `.bar` here
		super()
		|| It's OK after you've called `super`
		.bar := 1

	overridden-method \x
		+ (super x) .bar

	other-method \x
		super.overridden-method x

b = new B
. b.foo
. b.super-method()
. b.overridden-method 1
. b.other-method 3
. B.super-static
</pre></mason-editor><a href="/tour/class#record"><h2 id="record">record</h2></a><section><p>If a class is just a container for various fields, there's an easy record syntax.</p></section><mason-editor><pre>Point = class x y
	|| Can still put method definitions here.
	get transpose
		new Point .y .x

(new Point 1 2).transpose
</pre></mason-editor><section><p>The class will inherit from the <a href="//github.com/mason-lang/msl/tree/master/src/Type/Record.ms">Record</a> trait (traits are up next!).</p><p>Records can be <a href="./pattern">pattern matched</a>. They also have a default <code>'toString</code>.</p></section></main><footer><div class="prev-next" id="prev"><a href="poly">poly</a></div><div id="middle"><ul><li><a href="//unlicense.org/UNLICENSE">unlicensed</a></li><li><a href="//github.com/mason-lang"><i class="fa fa-github"></i></a></li><li><a href="//andy-hanson.me">author</a></li></ul></div><div class="prev-next" id="next"><a href="trait">trait</a></div></footer></body></html>