{"version":3,"sources":["private/transpile/transpileOperator.js"],"names":[],"mappings":"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","file":"private/transpile/transpileOperator.js","sourcesContent":["(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", 'esast/lib/Expression', 'esast/lib/Function', 'esast/lib/Identifier', '../util', './esast-constants', './ms', './transpileVal'], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    const Expression_1 = require('esast/lib/Expression');\n    const Function_1 = require('esast/lib/Function');\n    const Identifier_1 = require('esast/lib/Identifier');\n    const util_1 = require('../util');\n    const esast_constants_1 = require('./esast-constants');\n    const ms_1 = require('./ms');\n    const transpileVal_1 = require('./transpileVal');\n    function transpileOperatorNoLoc({ kind, args }) {\n        function fold(binary) {\n            return util_1.tail(args).reduce((acc, next) => binary(acc, transpileVal_1.default(next)), transpileVal_1.default(args[0]));\n        }\n        function logic(operator) {\n            return (a, b) => new Expression_1.LogicalExpression(operator, a, b);\n        }\n        function opr(operator) {\n            return (a, b) => new Expression_1.BinaryExpression(operator, a, b);\n        }\n        function call(called) {\n            return (a, b) => new Expression_1.CallExpression(called, [a, b]);\n        }\n        function conjunction(binary, msFunctionName) {\n            return args.length === 2 ?\n                binary(transpileVal_1.default(args[0]), transpileVal_1.default(args[1])) :\n                ms_1.msCall(msFunctionName, ...args.map(transpileVal_1.default));\n        }\n        switch (kind) {\n            case 0:\n                return fold(logic('&&'));\n            case 1:\n                return fold(opr('/'));\n            case 2:\n                return conjunction(call(ms_1.msMember('eq')), 'eqMany');\n            case 3:\n                return conjunction(call(objectIs), 'eqExact');\n            case 4:\n                return fold(call(mathPow));\n            case 7:\n                return conjunction(opr('<'), 'lt');\n            case 8:\n                return conjunction(opr('<='), 'lte');\n            case 5:\n                return conjunction(opr('>'), 'gt');\n            case 6:\n                return conjunction(opr('>='), 'gte');\n            case 9:\n                return fold(opr('-'));\n            case 10:\n                return fold(logic('||'));\n            case 11:\n                return fold(opr('+'));\n            case 12:\n                return fold(opr('%'));\n            case 13:\n                return fold(opr('*'));\n            default:\n                throw new Error(String(kind));\n        }\n    }\n    exports.transpileOperatorNoLoc = transpileOperatorNoLoc;\n    function transpileFunOperatorNoLoc(_) {\n        return ms_1.msMember((() => {\n            switch (_.kind) {\n                case 0:\n                    return 'and';\n                case 1:\n                    return 'div';\n                case 2:\n                    return 'eqMany';\n                case 3:\n                    return 'eqExact';\n                case 4:\n                    return 'exponent';\n                case 7:\n                    return 'lt';\n                case 8:\n                    return 'lte';\n                case 5:\n                    return 'gt';\n                case 6:\n                    return 'gte';\n                case 9:\n                    return 'minus';\n                case 10:\n                    return 'or';\n                case 11:\n                    return 'plus';\n                case 12:\n                    return 'remainder';\n                case 13:\n                    return 'times';\n                default:\n                    throw new Error(String(_));\n            }\n        })());\n    }\n    exports.transpileFunOperatorNoLoc = transpileFunOperatorNoLoc;\n    function transpileUnaryOperatorNoLoc({ kind, arg }) {\n        return unaryExpression(kind, transpileVal_1.default(arg));\n    }\n    exports.transpileUnaryOperatorNoLoc = transpileUnaryOperatorNoLoc;\n    function transpileFunUnaryNoLoc({ kind }) {\n        return new Function_1.ArrowFunctionExpression([esast_constants_1.idFocus], unaryExpression(kind, esast_constants_1.idFocus));\n    }\n    exports.transpileFunUnaryNoLoc = transpileFunUnaryNoLoc;\n    function unaryExpression(kind, arg) {\n        switch (kind) {\n            case 0:\n                return new Expression_1.UnaryExpression('-', arg);\n            case 1:\n                return new Expression_1.UnaryExpression('!', arg);\n            default:\n                throw new Error(String(kind));\n        }\n    }\n    const objectIs = new Expression_1.MemberExpressionPlain(new Identifier_1.default('Object'), new Identifier_1.default('is'));\n    const mathPow = new Expression_1.MemberExpressionPlain(new Identifier_1.default('Math'), new Identifier_1.default('pow'));\n});\n"],"sourceRoot":"/source/"}