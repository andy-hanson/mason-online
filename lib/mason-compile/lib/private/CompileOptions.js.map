{"version":3,"sources":["private/CompileOptions.js"],"names":[],"mappings":"AAAA,CAAC,UAAU,OAAV,EAAmB;AAChB,QAAI,OAAO,MAAP,KAAkB,QAAlB,IAA8B,OAAO,OAAO,OAAP,KAAmB,QAA1B,EAAoC;AAClE,YAAI,IAAI,QAAQ,OAAR,EAAiB,OAAjB,CAAJ,CAD8D,IAC3B,MAAM,SAAN,EAAiB,OAAO,OAAP,GAAiB,CAAjB,CAArB;KADvC,MAGK,IAAI,OAAO,MAAP,KAAkB,UAAlB,IAAgC,OAAO,GAAP,EAAY;AACjD,eAAO,CAAC,SAAD,EAAY,SAAZ,EAAuB,mBAAvB,EAA4C,QAA5C,EAAsD,0BAAtD,CAAP,EAA0F,OAA1F,EADiD;KAAhD;CAJR,CAAD,CAOG,UAAU,OAAV,EAAmB,OAAnB,EAA4B;AAC3B,iBAD2B;;AAE3B,UAAM,oBAAoB,QAAQ,mBAAR,CAApB,CAFqB;AAG3B,UAAM,SAAS,QAAQ,QAAR,CAAT,CAHqB;AAI3B,UAAM,iBAAiB,QAAQ,0BAAR,CAAjB,CAJqB;AAK3B,UAAM,cAAN,CAAqB;AACjB,oBAAY,IAAZ,EAAkB;AACd,kBAAM,IAAI,OAAO,aAAP,CAAqB,IAArB,EAA2B;AACjC,iCAAiB,KAAjB;AACA,kCAAkB,IAAlB;AACA,6BAAa,KAAb;AACA,2BAAW,IAAX;AACA,wBAAQ,IAAR;AACA,4BAAY,IAAZ;AACA,yBAAS,KAAT;AACA,wBAAQ,IAAR;AACA,0BAAU,SAAV;AACA,0BAAU,IAAV;AACA,qCAAqB,KAArB;aAXM,CAAJ,CADQ;AAcd,iBAAK,eAAL,GAAuB,EAAE,eAAF,CAdT;AAed,iBAAK,gBAAL,GAAwB,EAAE,gBAAF,CAfV;AAgBd,iBAAK,WAAL,GAAmB,EAAE,WAAF,CAhBL;AAiBd,iBAAK,SAAL,GAAiB,EAAE,SAAF,CAjBH;AAkBd,iBAAK,MAAL,GAAc,EAAE,MAAF,CAlBA;AAmBd,iBAAK,UAAL,GAAkB,EAAE,UAAF,CAnBJ;AAoBd,iBAAK,OAAL,GAAe,EAAE,OAAF,CApBD;AAqBd,iBAAK,MAAL,GAAc,EAAE,MAAF,CArBA;AAsBd,iBAAK,mBAAL,GAA2B,EAAE,mBAAF,CAtBb;AAuBd,kBAAM,WAAW,EAAE,QAAF,KAAe,IAAf,GAAsB,mBAAmB,KAAK,OAAL,CAAzC,GAAyD,EAAE,QAAF,CAvB5D;AAwBd,iBAAK,iBAAL,GAAyB,0BAA0B,QAA1B,CAAzB,CAxBc;AAyBd,iBAAK,QAAL,GAAgB,eAAe,OAAf,CAAuB,EAAE,QAAF,CAAvC,CAzBc;AA0Bd,kBAAM,YAAY,CAAZ;kBAAe,YAAY,CAAZ,CA1BP;AA2Bd,kBAAM,IAAI,KAAK,MAAL,CA3BI;AA4Bd,gBAAI,EAAE,OAAO,CAAP,KAAa,QAAb,GAAyB,aAAa,CAAb,IAAkB,KAAK,SAAL,GAAkB,MAAM,IAAN,CAA/D,EACA,MAAM,IAAI,KAAJ,CAAU,CAAC,+CAAD,GAAkD,CAAlD,EAAoD,CAA9D,CAAN,CADJ;SA5BJ;AA+BA,YAAI,QAAJ,GAAe;AACX,mBAAO,CAAC,GAAE,KAAK,OAAL,EAAa,aAAhB,CAAP,CADW;SAAf;AAGA,sBAAc,IAAd,EAAoB;AAChB,mBAAO,KAAK,iBAAL,CAAuB,GAAvB,CAA2B,IAA3B,CAAP,CADgB;SAApB;KAnCJ;AAuCA,WAAO,cAAP,CAAsB,OAAtB,EAA+B,YAA/B,EAA6C,EAAE,OAAO,IAAP,EAA/C,EA5C2B;AA6C3B,YAAQ,OAAR,GAAkB,cAAlB,CA7C2B;AA8C3B,aAAS,kBAAT,CAA4B,OAA5B,EAAqC;AACjC,cAAM,WAAW,OAAO,MAAP,CAAc,EAAd,EAAkB,kBAAkB,OAAlB,CAA7B,CAD2B;AAEjC,YAAI,YAAY,KAAZ,EACA,KAAK,MAAM,GAAN,IAAa,QAAlB,EAA4B;AACxB,kBAAM,IAAI,SAAS,GAAT,CAAJ,CADkB;AAExB,mBAAO,SAAS,GAAT,CAAP,CAFwB;AAGxB,qBAAS,IAAI,OAAJ,CAAY,MAAZ,EAAoB,OAApB,CAAT,IAAyC,CAAzC,CAHwB;SAA5B;AAKJ,eAAO,QAAP,CARiC;KAArC;AAUA,aAAS,yBAAT,CAAmC,QAAnC,EAA6C;AACzC,cAAM,IAAI,IAAI,GAAJ,EAAJ,CADmC;AAEzC,aAAK,MAAM,IAAN,IAAc,QAAnB,EAA6B;AACzB,kBAAM,WAAW,KAAK,OAAL,CAAa,KAAb,EAAoB,GAApB,CAAX,CADmB;AAEzB,iBAAK,IAAI,QAAJ,IAAgB,SAAS,IAAT,CAArB,EAAqC;AACjC,oBAAI,aAAa,GAAb,EACA,WAAW,OAAO,IAAP,CAAY,KAAK,KAAL,CAAW,GAAX,CAAZ,CAAX,CADJ;AAEA,oBAAI,EAAE,GAAF,CAAM,QAAN,CAAJ,EACI,MAAM,IAAI,KAAJ,CAAU,CAAC,QAAD,GAAW,QAAX,EAAoB,wBAApB,CAAV,CAAN,CADJ;AAEA,kBAAE,GAAF,CAAM,QAAN,EAAgB,QAAhB,EALiC;aAArC;SAFJ;AAUA,eAAO,CAAP,CAZyC;KAA7C;CAxDD,CAPH","file":"private/CompileOptions.js","sourcesContent":["(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", './defaultBuiltins', './util', './languages/allLanguages'], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    const defaultBuiltins_1 = require('./defaultBuiltins');\n    const util_1 = require('./util');\n    const allLanguages_1 = require('./languages/allLanguages');\n    class CompileOptions {\n        constructor(opts) {\n            const o = util_1.applyDefaults(opts, {\n                includeAmdefine: false,\n                includeSourceMap: true,\n                lazyModules: false,\n                useStrict: true,\n                checks: true,\n                importBoot: true,\n                mslPath: 'msl',\n                indent: '\\t',\n                language: 'english',\n                builtins: null,\n                noModuleBoilerplate: false\n            });\n            this.includeAmdefine = o.includeAmdefine;\n            this.includeSourceMap = o.includeSourceMap;\n            this.lazyModules = o.lazyModules;\n            this.useStrict = o.useStrict;\n            this.checks = o.checks;\n            this.importBoot = o.importBoot;\n            this.mslPath = o.mslPath;\n            this.indent = o.indent;\n            this.noModuleBoilerplate = o.noModuleBoilerplate;\n            const builtins = o.builtins === null ? getDefaultBuiltins(this.mslPath) : o.builtins;\n            this.builtinNameToPath = generateBuiltinNameToPath(builtins);\n            this.language = allLanguages_1.default[o.language];\n            const minIndent = 2, maxIndent = 8;\n            const i = this.indent;\n            if (!(typeof i === 'number' ? (minIndent <= i && i <= maxIndent) : i === '\\t'))\n                throw new Error(`opts.indent must be '\\t' or a number 2-8, got: ${i}`);\n        }\n        get bootPath() {\n            return `${this.mslPath}/private/boot`;\n        }\n        opBuiltinPath(name) {\n            return this.builtinNameToPath.get(name);\n        }\n    }\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.default = CompileOptions;\n    function getDefaultBuiltins(mslPath) {\n        const builtins = Object.assign({}, defaultBuiltins_1.default);\n        if (mslPath !== 'msl')\n            for (const key in builtins) {\n                const x = builtins[key];\n                delete builtins[key];\n                builtins[key.replace(/msl/g, mslPath)] = x;\n            }\n        return builtins;\n    }\n    function generateBuiltinNameToPath(builtins) {\n        const m = new Map();\n        for (const path in builtins) {\n            const realPath = path.replace(/\\./g, '/');\n            for (let imported of builtins[path]) {\n                if (imported === '_')\n                    imported = util_1.last(path.split('.'));\n                if (m.has(imported))\n                    throw new Error(`Builtin ${imported} defined more than once.`);\n                m.set(imported, realPath);\n            }\n        }\n        return m;\n    }\n});\n"],"sourceRoot":"/source/"}