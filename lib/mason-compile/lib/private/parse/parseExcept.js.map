{"version":3,"sources":["private/parse/parseExcept.js"],"names":[],"mappings":"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","file":"private/parse/parseExcept.js","sourcesContent":["(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", '../ast/errors', '../context', '../token/Keyword', './checks', './parseBlock', './parseLocalDeclares'], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    const errors_1 = require('../ast/errors');\n    const context_1 = require('../context');\n    const Keyword_1 = require('../token/Keyword');\n    const checks_1 = require('./checks');\n    const parseBlock_1 = require('./parseBlock');\n    const parseLocalDeclares_1 = require('./parseLocalDeclares');\n    function parseExcept(tokens) {\n        const lines = parseBlock_1.justBlock(5, tokens);\n        const [tried, rest] = takeTried(lines);\n        const [typedCatches, opCatchAll, rest2] = takeCatches(rest);\n        const [opElse, rest3] = opTakeElse(rest2);\n        const opFinally = parseOpFinally(rest3);\n        return new errors_1.Except(tokens.loc, tried, typedCatches, opCatchAll, opElse, opFinally);\n    }\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.default = parseExcept;\n    function takeTried(lines) {\n        const line = lines.headSlice();\n        checks_1.checkKeyword(59, line.head());\n        return [parseBlock_1.parseJustBlock(59, line.tail()), lines.tail()];\n    }\n    function takeCatches(lines) {\n        const typedCatches = [];\n        let opCatchAll = null;\n        while (!lines.isEmpty()) {\n            const line = lines.headSlice();\n            if (!Keyword_1.isKeyword(37, line.head()))\n                break;\n            const [before, block] = parseBlock_1.beforeAndBlock(line.tail());\n            const caught = parseLocalDeclares_1.parseLocalDeclareOrFocus(before);\n            const catcher = new errors_1.Catch(line.loc, caught, parseBlock_1.default(block));\n            lines = lines.tail();\n            if (caught.opType === null) {\n                opCatchAll = catcher;\n                break;\n            }\n            else\n                typedCatches.push(catcher);\n        }\n        return [typedCatches, opCatchAll, lines];\n    }\n    function opTakeElse(lines) {\n        if (lines.isEmpty())\n            return [null, lines];\n        const line = lines.headSlice();\n        const tokenElse = line.head();\n        return Keyword_1.isKeyword(43, tokenElse) ?\n            [parseBlock_1.parseJustBlock(43, line.tail()), lines.tail()] :\n            [null, lines];\n    }\n    function parseOpFinally(lines) {\n        if (lines.isEmpty())\n            return null;\n        const line = lines.headSlice();\n        checks_1.checkKeyword(45, line.head());\n        context_1.check(lines.size() === 1, lines.loc, _ => _.nothingAfterFinally);\n        return parseBlock_1.parseJustBlock(45, line.tail());\n    }\n});\n"],"sourceRoot":"/source/"}