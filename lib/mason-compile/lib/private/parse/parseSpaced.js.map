{"version":3,"sources":["private/parse/parseSpaced.js"],"names":[],"mappings":"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","file":"private/parse/parseSpaced.js","sourcesContent":["(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", 'op/Op', '../context', '../ast/Call', '../ast/Class', '../ast/Fun', '../ast/locals', '../ast/Quote', '../ast/Val', '../token/Group', '../token/Keyword', '../util', './checks', './parseExpr', './parseMemberName', './parseName', './parseQuote', './parseSingle', './Slice'], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    const Op_1 = require('op/Op');\n    const context_1 = require('../context');\n    const Call_1 = require('../ast/Call');\n    const Class_1 = require('../ast/Class');\n    const Fun_1 = require('../ast/Fun');\n    const locals_1 = require('../ast/locals');\n    const Quote_1 = require('../ast/Quote');\n    const Val_1 = require('../ast/Val');\n    const Group_1 = require('../token/Group');\n    const Keyword_1 = require('../token/Keyword');\n    const util_1 = require('../util');\n    const checks_1 = require('./checks');\n    const parseExpr_1 = require('./parseExpr');\n    const parseMemberName_1 = require('./parseMemberName');\n    const parseName_1 = require('./parseName');\n    const parseQuote_1 = require('./parseQuote');\n    const parseSingle_1 = require('./parseSingle');\n    const Slice_1 = require('./Slice');\n    function parseSpaced(tokens) {\n        const h = tokens.head(), rest = tokens.tail();\n        if (h instanceof Keyword_1.KeywordPlain)\n            switch (h.kind) {\n                case 34:\n                    return parseAmpersand(tokens.loc, rest);\n                case 41: {\n                    const h2 = rest.head();\n                    if (Keyword_1.isKeyword(34, h2)) {\n                        const tail = rest.tail();\n                        const h3 = tail.head();\n                        const name = parseMemberName_1.default(h3);\n                        const fun = new Fun_1.FunMember(h2.loc, locals_1.LocalAccess.this(h2.loc), name);\n                        return parseSpacedFold(fun, tail.tail());\n                    }\n                    else {\n                        const name = parseMemberName_1.default(rest.head());\n                        const member = new Val_1.Member(h.loc, locals_1.LocalAccess.this(h.loc), name);\n                        return parseSpacedFold(member, rest.tail());\n                    }\n                }\n                case 27:\n                    return new Call_1.Spread(tokens.loc, parseSpacedFold(parseSingle_1.default(rest.head()), rest.tail()));\n                case 51:\n                    return new Val_1.Lazy(h.loc, parseSpaced(rest));\n                case 13: {\n                    const h2 = rest.head();\n                    if (Keyword_1.isKeyword(41, h2)) {\n                        const tail = rest.tail();\n                        const sup = new Class_1.SuperMember(h2.loc, parseMemberName_1.default(tail.head()));\n                        return parseSpacedFold(sup, tail.tail());\n                    }\n                    else if (h2 instanceof Group_1.GroupParenthesis && Slice_1.Tokens.of(h2).isEmpty()) {\n                        const x = new Class_1.SuperCall(h2.loc, []);\n                        return parseSpacedFold(x, rest.tail());\n                    }\n                    else\n                        throw context_1.fail(h2.loc, _ => _.tokenAfterSuper);\n                }\n                case 58: {\n                    const h2 = rest.head();\n                    const quote = new Quote_1.QuoteSimple(h2.loc, parseName_1.default(h2));\n                    return parseSpacedFold(quote, rest.tail());\n                }\n                case 38:\n                    return new Val_1.InstanceOf(h.loc, locals_1.LocalAccess.focus(h.loc), parseSpaced(rest));\n                default:\n            }\n        return parseSpacedFold(parseSingle_1.default(h, true), rest);\n    }\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.default = parseSpaced;\n    function parseSpacedFold(start, rest) {\n        let acc = start;\n        for (let i = rest.start; i < rest.end; i = i + 1) {\n            function restVal() {\n                return parseSpaced(rest.chopStart(i + 1));\n            }\n            const token = rest.tokens[i];\n            const loc = token.loc;\n            if (token instanceof Keyword_1.KeywordPlain)\n                switch (token.kind) {\n                    case 34:\n                        if (i === rest.end - 1)\n                            throw checks_1.unexpected(token);\n                        i = i + 1;\n                        acc = new Fun_1.FunMember(token.loc, acc, parseMemberName_1.default(rest.tokens[i]));\n                        break;\n                    case 41: {\n                        util_1.assert(i < rest.end - 1);\n                        i = i + 1;\n                        acc = new Val_1.Member(token.loc, acc, parseMemberName_1.default(rest.tokens[i]));\n                        break;\n                    }\n                    case 42:\n                        context_1.check(i < rest.end - 1, token.loc, _ => _.infiniteRange);\n                        return new Val_1.Range(token.loc, acc, restVal(), false);\n                    case 27:\n                        return new Val_1.Range(token.loc, acc, Op_1.opIf(i < rest.end - 1, restVal), true);\n                    case 46:\n                        acc = new Call_1.default(token.loc, acc, [locals_1.LocalAccess.focus(loc)]);\n                        break;\n                    case 38:\n                        return new Val_1.InstanceOf(token.loc, acc, restVal());\n                    default:\n                        throw checks_1.unexpected(token);\n                }\n            else if (token instanceof Group_1.GroupBracket)\n                acc = new Val_1.Sub(loc, acc, parseExpr_1.parseExprParts(Slice_1.Tokens.of(token)));\n            else if (token instanceof Group_1.GroupParenthesis) {\n                checks_1.checkEmpty(Slice_1.Tokens.of(token), _ => _.parensOutsideCall);\n                acc = new Call_1.default(loc, acc, []);\n            }\n            else if (token instanceof Group_1.GroupQuote)\n                acc = new Quote_1.QuoteTagged(loc, acc, parseQuote_1.default(Slice_1.default.of(token)));\n            else\n                throw checks_1.unexpected(token);\n        }\n        return acc;\n    }\n    function parseAmpersand(loc, tokens) {\n        const h = tokens.head();\n        const tail = tokens.tail();\n        const [fun, rest] = (() => {\n            if (h instanceof Group_1.GroupParenthesis)\n                return [new Fun_1.FunSimple(loc, parseExpr_1.default(Slice_1.Tokens.of(h))), tail];\n            else if (h instanceof Keyword_1.KeywordOperator)\n                return [new Fun_1.FunOperator(loc, h.kind), tail];\n            else if (h instanceof Keyword_1.KeywordUnaryOperator)\n                return [new Fun_1.FunUnary(loc, h.kind), tail];\n            else if (Keyword_1.isKeyword(41, h)) {\n                const h2 = tail.head();\n                return [new Fun_1.FunGetter(h2.loc, parseMemberName_1.default(h2)), tail.tail()];\n            }\n            else\n                return [new Fun_1.FunMember(h.loc, null, parseMemberName_1.default(h)), tail];\n        })();\n        return parseSpacedFold(fun, rest);\n    }\n});\n"],"sourceRoot":"/source/"}