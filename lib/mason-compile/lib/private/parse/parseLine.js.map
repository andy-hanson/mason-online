{"version":3,"sources":["private/parse/parseLine.js"],"names":[],"mappings":"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","file":"private/parse/parseLine.js","sourcesContent":["(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", 'op/Op', '../ast/BuildEntry', '../ast/Call', '../ast/Do', '../ast/errors', '../ast/locals', '../ast/Loop', '../ast/Quote', '../ast/Val', '../context', '../token/Group', '../token/Keyword', '../util', './checks', './parseBlock', './parseExpr', './parseLocalDeclares', './parseMemberName', './parseName', './parseQuote', './parseSpaced', './parseTraitDo', './Slice'], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    const Op_1 = require('op/Op');\n    const BuildEntry_1 = require('../ast/BuildEntry');\n    const Call_1 = require('../ast/Call');\n    const Do_1 = require('../ast/Do');\n    const errors_1 = require('../ast/errors');\n    const locals_1 = require('../ast/locals');\n    const Loop_1 = require('../ast/Loop');\n    const Quote_1 = require('../ast/Quote');\n    const Val_1 = require('../ast/Val');\n    const context_1 = require('../context');\n    const Group_1 = require('../token/Group');\n    const Keyword_1 = require('../token/Keyword');\n    const util_1 = require('../util');\n    const checks_1 = require('./checks');\n    const parseBlock_1 = require('./parseBlock');\n    const parseExpr_1 = require('./parseExpr');\n    const parseLocalDeclares_1 = require('./parseLocalDeclares');\n    const parseMemberName_1 = require('./parseMemberName');\n    const parseName_1 = require('./parseName');\n    const parseQuote_1 = require('./parseQuote');\n    const parseSpaced_1 = require('./parseSpaced');\n    const parseTraitDo_1 = require('./parseTraitDo');\n    const Slice_1 = require('./Slice');\n    function parseLine(tokens) {\n        const loc = tokens.loc;\n        const head = tokens.head();\n        const rest = () => tokens.tail();\n        const noRest = () => {\n            checks_1.checkEmpty(rest(), _ => _.unexpectedAfter(head));\n        };\n        if (head instanceof Keyword_1.KeywordComment) {\n            util_1.assert(head.kind === 'region');\n            return parseLines(parseBlock_1.justBlock(55, rest()));\n        }\n        if (Keyword_1.isLineStartKeyword(head))\n            switch (head.kind) {\n                case 24:\n                case 28:\n                    return parseAssert(head.kind === 28, rest());\n                case 25:\n                    return new Loop_1.Break(loc, parseExpr_1.opParseExpr(rest()));\n                case 26:\n                    noRest();\n                    return new Do_1.SpecialDo(loc, 0);\n                case 27:\n                    return new BuildEntry_1.BagEntry(loc, parseExpr_1.default(rest()), true);\n                case 29:\n                    return new Do_1.Ignore(loc, rest().map(parseLocalDeclares_1.parseLocalName));\n                case 23:\n                    return new BuildEntry_1.BagEntry(loc, parseExpr_1.default(rest()));\n                case 30:\n                    return Op_1.caseOp(parseExpr_1.opParseExpr(rest()), _ => new Do_1.Pass(tokens.loc, _), () => []);\n                case 31:\n                    return new errors_1.Throw(loc, parseExpr_1.opParseExpr(rest()));\n                case 32:\n                    return parseTraitDo_1.default(rest());\n                default:\n            }\n        return Op_1.caseOp(tokens.opSplitOnce(Keyword_1.isLineSplitKeyword), ({ before, at: atToken, after }) => {\n            const at = atToken;\n            switch (at.kind) {\n                case 22:\n                    return new BuildEntry_1.MapEntry(loc, parseExpr_1.default(before), parseExpr_1.default(after));\n                case 23:\n                    return parseObjEntry(before, after, loc);\n                case 21:\n                    return parseMutate(before, after, loc);\n                case 20:\n                    return parseAssign(before, after, loc);\n                default:\n                    throw new Error(String(at.kind));\n            }\n        }, () => parseExpr_1.default(tokens));\n    }\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.default = parseLine;\n    function parseLines(lines) {\n        const lineContents = [];\n        for (const line of lines.slices()) {\n            const _ = parseLine(line);\n            if (_ instanceof Array)\n                lineContents.push(..._);\n            else\n                lineContents.push(_);\n        }\n        return lineContents;\n    }\n    exports.parseLines = parseLines;\n    function parseMutate(before, after, loc) {\n        const value = parseExpr_1.default(after);\n        if (before.size() === 1) {\n            const token = before.head();\n            if (token instanceof Group_1.GroupSpace) {\n                const spaced = Slice_1.Tokens.of(token);\n                const [assignee, opType] = Op_1.caseOp(spaced.opSplitOnce(_ => Keyword_1.isKeyword(38, _)), ({ before, after }) => [before, parseExpr_1.default(after)], () => [spaced, null]);\n                const last = assignee.last();\n                function object(obj) {\n                    return obj.isEmpty() ? locals_1.LocalAccess.this(obj.loc) : parseSpaced_1.default(obj);\n                }\n                if (Keyword_1.isKeyword(41, assignee.nextToLast())) {\n                    const name = parseMemberName_1.default(last);\n                    const set = object(assignee.rtail().rtail());\n                    return new Do_1.MemberSet(loc, set, name, opType, value);\n                }\n                else if (last instanceof Group_1.GroupBracket) {\n                    const set = object(assignee.rtail());\n                    const subbeds = parseExpr_1.parseExprParts(Slice_1.Tokens.of(last));\n                    return new Do_1.SetSub(loc, set, subbeds, opType, value);\n                }\n            }\n        }\n        return parseLocalMutate(before, value, loc);\n    }\n    function parseObjEntry(before, after, loc) {\n        if (before.size() === 1) {\n            const token = before.head();\n            const isName = token instanceof Keyword_1.KeywordSpecialVal && token.kind === 1;\n            const value = () => parseExpr_1.default(after);\n            if (after.isEmpty())\n                return isName ?\n                    BuildEntry_1.ObjEntryPlain.nameEntry(loc, new Val_1.SpecialVal(loc, 1)) :\n                    BuildEntry_1.ObjEntryPlain.access(loc, parseLocalDeclares_1.parseLocalName(token));\n            else if (token instanceof Keyword_1.default)\n                return new BuildEntry_1.ObjEntryPlain(loc, token.name(), value());\n            else if (token instanceof Group_1.GroupQuote)\n                return new BuildEntry_1.ObjEntryPlain(loc, parseQuote_1.default(Slice_1.default.of(token)), value());\n            else if (token instanceof Group_1.GroupSpace) {\n                const slice = Slice_1.Tokens.of(token);\n                if (slice.size() === 2 && Keyword_1.isKeyword(58, slice.head())) {\n                    const name = new Quote_1.QuoteSimple(loc, parseName_1.default(slice.second()));\n                    return new BuildEntry_1.ObjEntryPlain(loc, name, value());\n                }\n            }\n        }\n        const assign = parseAssign(before, after, loc);\n        return new BuildEntry_1.ObjEntryAssign(loc, assign);\n    }\n    function parseLocalMutate(localsTokens, value, loc) {\n        const locals = parseLocalDeclares_1.parseLocalDeclaresJustNames(localsTokens);\n        context_1.check(locals.length === 1, loc, _ => _.todoMutateDestructure);\n        return new locals_1.LocalMutate(loc, locals[0].name, value);\n    }\n    function parseAssign(assigneeTokens, after, loc) {\n        context_1.check(assigneeTokens.size() === 1, assigneeTokens.loc, _ => _.badAssignee);\n        const assignee = assigneeTokens.head();\n        const value = parseExpr_1.default(after);\n        if (assignee instanceof Group_1.GroupBrace) {\n            const locals = Slice_1.Tokens.of(assignee).map(parseLocalDeclares_1.parseLocalDeclare);\n            return new locals_1.AssignDestructure(loc, locals, value);\n        }\n        else\n            return new locals_1.AssignSingle(loc, parseLocalDeclares_1.parseLocalDeclare(assignee), value);\n    }\n    function parseAssert(negate, tokens) {\n        checks_1.checkNonEmpty(tokens, _ => _.expectedAfterAssert);\n        const [condTokens, opThrown] = Op_1.caseOp(tokens.opSplitOnce(_ => Keyword_1.isKeyword(31, _)), ({ before, after }) => [before, parseExpr_1.default(after)], () => [tokens, null]);\n        const parts = parseExpr_1.parseExprParts(condTokens);\n        const cond = parts.length === 1 ? parts[0] : new Call_1.default(condTokens.loc, parts[0], util_1.tail(parts));\n        return new errors_1.Assert(tokens.loc, negate, cond, opThrown);\n    }\n});\n"],"sourceRoot":"/source/"}