{"version":3,"sources":["private/verify/verifyFun.js"],"names":[],"mappings":"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","file":"private/verify/verifyFun.js","sourcesContent":["(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", '../context', '../ast/Fun', '../ast/locals', '../util', './context', './verifyBlock', './verifyLocals', './verifyMemberName', './verifyVal'], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    const context_1 = require('../context');\n    const Fun_1 = require('../ast/Fun');\n    const locals_1 = require('../ast/locals');\n    const util_1 = require('../util');\n    const context_2 = require('./context');\n    const verifyBlock_1 = require('./verifyBlock');\n    const verifyLocals_1 = require('./verifyLocals');\n    const verifyMemberName_1 = require('./verifyMemberName');\n    const verifyVal_1 = require('./verifyVal');\n    function verifyFun(_) {\n        if (_ instanceof Fun_1.FunBlock)\n            verifyFunBlock(_);\n        else if (_ instanceof Fun_1.FunGetter)\n            verifyMemberName_1.default(_.name);\n        else if (_ instanceof Fun_1.FunMember) {\n            const { opObject, name } = _;\n            verifyVal_1.verifyOpVal(opObject);\n            verifyMemberName_1.default(name);\n        }\n        else if (_ instanceof Fun_1.FunOperator || _ instanceof Fun_1.FunUnary) {\n        }\n        else if (_ instanceof Fun_1.FunSimple) {\n            const { loc, value } = _;\n            context_2.withFun(0, () => {\n                verifyLocals_1.registerAndPlusLocal(locals_1.LocalDeclare.focus(loc), () => {\n                    verifyVal_1.default(value);\n                });\n            });\n        }\n        else\n            throw new Error(_.constructor.name);\n    }\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.default = verifyFun;\n    function verifyFunBlock({ loc, opReturnType, isDo, opDeclareThis, args, opRestArg, kind, block }) {\n        context_1.check(opReturnType === null || !isDo, loc, _ => _.doFuncCantHaveType);\n        verifyVal_1.verifyOpVal(opReturnType);\n        const allArgs = util_1.cat(opDeclareThis, args, opRestArg);\n        context_2.withFun(kind, () => {\n            verifyLocals_1.verifyAndPlusLocals(allArgs, () => {\n                verifyBlock_1.verifyBlockSK(block, isDo ? 0 : 1);\n            });\n        });\n    }\n    exports.verifyFunBlock = verifyFunBlock;\n});\n"],"sourceRoot":"/source/"}