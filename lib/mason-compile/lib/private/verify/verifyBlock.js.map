{"version":3,"sources":["private/verify/verifyBlock.js"],"names":[],"mappings":"AAAA,CAAC,UAAU,OAAV,EAAmB;AAChB,QAAI,OAAO,MAAP,KAAkB,QAAlB,IAA8B,OAAO,OAAO,OAAP,KAAmB,QAA1B,EAAoC;AAClE,YAAI,IAAI,QAAQ,OAAR,EAAiB,OAAjB,CAAJ,CAD8D,IAC3B,MAAM,SAAN,EAAiB,OAAO,OAAP,GAAiB,CAAjB,CAArB;KADvC,MAGK,IAAI,OAAO,MAAP,KAAkB,UAAlB,IAAgC,OAAO,GAAP,EAAY;AACjD,eAAO,CAAC,SAAD,EAAY,SAAZ,EAAuB,YAAvB,EAAqC,SAArC,EAAgD,iBAAhD,EAAmE,WAAnE,EAAgF,eAAhF,EAAiG,gBAAjG,EAAmH,aAAnH,CAAP,EAA0I,OAA1I,EADiD;KAAhD;CAJR,CAAD,CAOG,UAAU,OAAV,EAAmB,OAAnB,EAA4B;AAC3B,iBAD2B;;AAE3B,UAAM,YAAY,QAAQ,YAAR,CAAZ,CAFqB;AAG3B,UAAM,SAAS,QAAQ,SAAR,CAAT,CAHqB;AAI3B,UAAM,kBAAkB,QAAQ,iBAAR,CAAlB,CAJqB;AAK3B,UAAM,YAAY,QAAQ,WAAR,CAAZ,CALqB;AAM3B,UAAM,gBAAgB,QAAQ,eAAR,CAAhB,CANqB;AAO3B,UAAM,iBAAiB,QAAQ,gBAAR,CAAjB,CAPqB;AAQ3B,UAAM,cAAc,QAAQ,aAAR,CAAd,CARqB;AAS3B,aAAS,aAAT,CAAuB,CAAvB,EAA0B,EAA1B,EAA8B;AAC1B,YAAI,OAAO,CAAP,EACA,cAAc,CAAd,EADJ,KAGI,eAAe,CAAf,EAHJ;KADJ;AAMA,YAAQ,aAAR,GAAwB,aAAxB,CAf2B;AAgB3B,aAAS,cAAT,CAAwB,CAAxB,EAA2B;cACf,QAAe,EAAf,MADe;cACR,MAAQ,EAAR,IADQ;;AAEvB,kBAAU,KAAV,CAAgB,CAAC,OAAO,OAAP,CAAe,KAAf,CAAD,EAAwB,GAAxC,EAA6C,KAAK,EAAE,iBAAF,CAAlD,CAFuB;AAGvB,cAAM,OAAO,gBAAgB,OAAhB,CAAwB,KAAxB,EAA+B,GAA/B,CAAP,CAHiB;AAIvB,gBAAQ,IAAR;AACI,iBAAK,CAAL,CADJ;AAEI,iBAAK,CAAL,CAFJ;AAGI,iBAAK,CAAL;AACI,8BAAc,gBAAd,CAA+B,KAA/B,EAAsC,GAAtC,EADJ;AAEI,sBAFJ;AAHJ,iBAMS,CAAL;AACI,8BAAc,OAAd,CAAsB,KAAtB,EADJ;AAEI,sBAFJ;AANJ,iBASS,CAAL;AACI,+BAAe,UAAf,CAA0B,cAAc,OAAd,CAAsB,OAAO,KAAP,CAAa,KAAb,CAAtB,CAA1B,EAAsE,MAAM,YAAY,kBAAZ,CAA+B,OAAO,IAAP,CAAY,KAAZ,CAA/B,CAAN,CAAtE,CADJ;AAEI,sBAFJ;AATJ;AAaQ,sBAAM,IAAI,KAAJ,CAAU,OAAO,IAAP,CAAV,CAAN,CADJ;AAZJ,SAJuB;AAmBvB,kBAAU,OAAV,CAAkB,WAAlB,CAA8B,GAA9B,CAAkC,CAAlC,EAAqC,IAArC,EAnBuB;KAA3B;AAqBA,YAAQ,cAAR,GAAyB,cAAzB,CArC2B;AAsC3B,aAAS,aAAT,CAAuB,CAAvB,EAA0B;AACtB,kBAAU,OAAV,CAAkB,WAAlB,CAA8B,GAA9B,CAAkC,CAAlC,EAAqC,CAArC,EADsB;AAEtB,eAAO,cAAc,OAAd,CAAsB,EAAE,KAAF,CAA7B,CAFsB;KAA1B;AAIA,YAAQ,aAAR,GAAwB,aAAxB,CA1C2B;CAA5B,CAPH","file":"private/verify/verifyBlock.js","sourcesContent":["(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", '../context', '../util', './autoBlockKind', './context', './verifyLines', './verifyLocals', './verifyVal'], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    const context_1 = require('../context');\n    const util_1 = require('../util');\n    const autoBlockKind_1 = require('./autoBlockKind');\n    const context_2 = require('./context');\n    const verifyLines_1 = require('./verifyLines');\n    const verifyLocals_1 = require('./verifyLocals');\n    const verifyVal_1 = require('./verifyVal');\n    function verifyBlockSK(_, sk) {\n        if (sk === 0)\n            verifyBlockDo(_);\n        else\n            verifyBlockVal(_);\n    }\n    exports.verifyBlockSK = verifyBlockSK;\n    function verifyBlockVal(_) {\n        const { lines, loc } = _;\n        context_1.check(!util_1.isEmpty(lines), loc, _ => _.blockNeedsContent);\n        const kind = autoBlockKind_1.default(lines, loc);\n        switch (kind) {\n            case 3:\n            case 4:\n            case 5:\n                verifyLines_1.verifyBuiltLines(lines, loc);\n                break;\n            case 1:\n                verifyLines_1.default(lines);\n                break;\n            case 2:\n                verifyLocals_1.plusLocals(verifyLines_1.default(util_1.rtail(lines)), () => verifyVal_1.ensureValAndVerify(util_1.last(lines)));\n                break;\n            default:\n                throw new Error(String(kind));\n        }\n        context_2.results.blockToKind.set(_, kind);\n    }\n    exports.verifyBlockVal = verifyBlockVal;\n    function verifyBlockDo(_) {\n        context_2.results.blockToKind.set(_, 0);\n        return verifyLines_1.default(_.lines);\n    }\n    exports.verifyBlockDo = verifyBlockDo;\n});\n"],"sourceRoot":"/source/"}