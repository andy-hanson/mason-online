{"version":3,"sources":["private/verify/verifyVal.js"],"names":[],"mappings":"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","file":"private/verify/verifyVal.js","sourcesContent":["(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", 'op/Op', '../context', '../ast/Block', '../ast/Call', '../ast/Class', '../ast/Fun', '../ast/LineContent', '../ast/locals', '../ast/Loop', '../ast/Poly', '../ast/Trait', '../ast/Quote', '../ast/Val', './context', './util', './verifyBlock', './verifyCall', './verifyClass', './verifyFun', './verifyLocals', './verifyLoop', './verifyMemberName', './verifyPoly', './verifyQuote', './verifyTrait', './verifyValOrDo'], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    const Op_1 = require('op/Op');\n    const context_1 = require('../context');\n    const Block_1 = require('../ast/Block');\n    const Call_1 = require('../ast/Call');\n    const Class_1 = require('../ast/Class');\n    const Fun_1 = require('../ast/Fun');\n    const LineContent_1 = require('../ast/LineContent');\n    const locals_1 = require('../ast/locals');\n    const Loop_1 = require('../ast/Loop');\n    const Poly_1 = require('../ast/Poly');\n    const Trait_1 = require('../ast/Trait');\n    const Quote_1 = require('../ast/Quote');\n    const Val_1 = require('../ast/Val');\n    const context_2 = require('./context');\n    const util_1 = require('./util');\n    const verifyBlock_1 = require('./verifyBlock');\n    const verifyCall_1 = require('./verifyCall');\n    const verifyClass_1 = require('./verifyClass');\n    const verifyFun_1 = require('./verifyFun');\n    const verifyLocals_1 = require('./verifyLocals');\n    const verifyLoop_1 = require('./verifyLoop');\n    const verifyMemberName_1 = require('./verifyMemberName');\n    const verifyPoly_1 = require('./verifyPoly');\n    const verifyQuote_1 = require('./verifyQuote');\n    const verifyTrait_1 = require('./verifyTrait');\n    const verifyValOrDo_1 = require('./verifyValOrDo');\n    function verifyVal(_) {\n        if (_ instanceof Val_1.BagSimple)\n            verifyCall_1.verifyEachValOrSpread(_.parts);\n        else if (_ instanceof Block_1.BlockWrap)\n            context_2.withIife(() => verifyBlock_1.verifyBlockVal(_.block));\n        else if (_ instanceof Class_1.default)\n            verifyClass_1.default(_);\n        else if (_ instanceof Loop_1.ForBag)\n            verifyLocals_1.verifyAndPlusLocal(_.built, () => verifyLoop_1.default(_, 1));\n        else if (_ instanceof Fun_1.default)\n            verifyFun_1.default(_);\n        else if (_ instanceof Val_1.InstanceOf) {\n            const { instance, type } = _;\n            verifyVal(instance);\n            verifyVal(type);\n        }\n        else if (_ instanceof Val_1.Lazy)\n            verifyLocals_1.withBlockLocals(() => verifyVal(_.value));\n        else if (_ instanceof locals_1.LocalAccess)\n            verifyLocals_1.verifyLocalAccess(_);\n        else if (_ instanceof Val_1.Member) {\n            const { object, name } = _;\n            verifyVal(object);\n            verifyMemberName_1.default(name);\n        }\n        else if (_ instanceof Quote_1.MsRegExp)\n            verifyQuote_1.verifyRegExp(_);\n        else if (_ instanceof Call_1.New)\n            verifyCall_1.verifyNew(_);\n        else if (_ instanceof Val_1.NumberLiteral) {\n        }\n        else if (_ instanceof Val_1.ObjSimple) {\n            const keys = new Set();\n            for (const { key, value, loc } of _.pairs) {\n                if (typeof key === 'string') {\n                    context_1.check(!keys.has(key), loc, _ => _.duplicateKey(key));\n                    keys.add(key);\n                }\n                else\n                    verifyVal(key);\n                verifyVal(value);\n            }\n        }\n        else if (_ instanceof Val_1.Operator) {\n            const { args, loc } = _;\n            context_1.check(args.length > 1, loc, _ => _.argsOperator(args.length));\n            verifyEachVal(_.args);\n        }\n        else if (_ instanceof Val_1.Pipe) {\n            const { loc, startValue, pipes } = _;\n            verifyVal(startValue);\n            for (const pipe of pipes)\n                verifyLocals_1.registerAndPlusLocal(locals_1.LocalDeclare.focus(loc), () => {\n                    verifyVal(pipe);\n                });\n        }\n        else if (_ instanceof Poly_1.default)\n            verifyPoly_1.default(_);\n        else if (_ instanceof Quote_1.default)\n            verifyQuote_1.default(_);\n        else if (_ instanceof Quote_1.QuoteTagged)\n            verifyQuote_1.verifyQuoteTagged(_);\n        else if (_ instanceof Val_1.Range) {\n            const { start, opEnd } = _;\n            verifyVal(start);\n            verifyOpVal(opEnd);\n        }\n        else if (_ instanceof Val_1.SpecialVal) {\n            if (_.kind === 1)\n                util_1.setName(_);\n        }\n        else if (_ instanceof Val_1.Sub) {\n            const { subbed, args } = _;\n            verifyVal(subbed);\n            verifyEachVal(args);\n        }\n        else if (_ instanceof Class_1.SuperMember)\n            verifyClass_1.verifySuperMember(_);\n        else if (_ instanceof Trait_1.default)\n            verifyTrait_1.default(_);\n        else if (_ instanceof Val_1.UnaryOperator)\n            verifyVal(_.arg);\n        else\n            verifyValOrDo_1.default(_, 1);\n    }\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.default = verifyVal;\n    function ensureValAndVerify(_) {\n        if (LineContent_1.isVal(_))\n            verifyVal(_);\n        else\n            throw context_1.fail(_.loc, _ => _.statementAsValue);\n    }\n    exports.ensureValAndVerify = ensureValAndVerify;\n    function verifyOpVal(_) {\n        if (Op_1.nonNull(_))\n            verifyVal(_);\n    }\n    exports.verifyOpVal = verifyOpVal;\n    function verifyEachVal(vals) {\n        for (const _ of vals)\n            verifyVal(_);\n    }\n    exports.verifyEachVal = verifyEachVal;\n});\n"],"sourceRoot":"/source/"}