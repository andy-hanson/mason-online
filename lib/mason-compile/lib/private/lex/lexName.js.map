{"version":3,"sources":["private/lex/lexName.js"],"names":[],"mappings":"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","file":"private/lex/lexName.js","sourcesContent":["(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", 'esast/lib/Loc', 'op/Op', '../context', '../token/Keyword', '../token/Token', './chars', './groupContext', './sourceContext'], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    const Loc_1 = require('esast/lib/Loc');\n    const Op_1 = require('op/Op');\n    const context_1 = require('../context');\n    const Keyword_1 = require('../token/Keyword');\n    const Token_1 = require('../token/Token');\n    const chars_1 = require('./chars');\n    const groupContext_1 = require('./groupContext');\n    const sourceContext_1 = require('./sourceContext');\n    function lexName(startPos, isInterpolation) {\n        const name = sourceContext_1.takeWhileWithPrev(chars_1.isNameCharacter);\n        if (sourceContext_1.peek(-1) === 95) {\n            if (name.length > 1) {\n                if (isInterpolation)\n                    groupContext_1.openInterpolation(Loc_1.default.singleChar(startPos));\n                handleNameText(startPos, name.slice(0, name.length - 1), false);\n                keyword(sourceContext_1.pos(), 46);\n                if (isInterpolation)\n                    groupContext_1.closeInterpolation(Loc_1.default.singleChar(sourceContext_1.pos()));\n            }\n            else\n                keyword(startPos, 46);\n        }\n        else\n            handleNameText(startPos, name, !isInterpolation);\n    }\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.default = lexName;\n    function handleNameText(startPos, name, allowSpecialKeywords) {\n        const loc = new Loc_1.default(startPos, sourceContext_1.pos());\n        const keyword = Keyword_1.opKeywordFromName(loc, name);\n        if (Op_1.nonNull(keyword)) {\n            if (keyword instanceof Keyword_1.KeywordComment) {\n                if (keyword.kind === 'todo') {\n                    context_1.check(allowSpecialKeywords, startPos, _ => _.noSpecialKeyword('todo'));\n                    sourceContext_1.skipRestOfLine();\n                }\n                else {\n                    context_1.check(allowSpecialKeywords, startPos, _ => _.noSpecialKeyword('region'));\n                    sourceContext_1.skipRestOfLine();\n                    groupContext_1.addToCurrentGroup(keyword);\n                }\n            }\n            else\n                groupContext_1.addToCurrentGroup(keyword);\n        }\n        else\n            groupContext_1.addToCurrentGroup(new Token_1.NameToken(new Loc_1.default(startPos, sourceContext_1.pos()), name));\n    }\n    function keyword(startPos, kind) {\n        groupContext_1.addToCurrentGroup(new Keyword_1.KeywordPlain(new Loc_1.default(startPos, sourceContext_1.pos()), kind));\n    }\n});\n"],"sourceRoot":"/source/"}